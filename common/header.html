<div id='tagline' class="tagline" style="
    text-align: left;
    font-weight: 300;
    font-size: 1.4em;
    color: #666666;
    display: none;
    margin-top: 20pt;
">The voice of older people online</div>


<div id='topCategories' style='display: none'>
    <div class='bigHeroImageDiv'>
        <div class='searchContainer wrap'>
            <div class="search-header">
                <form role="search" method="get" class="searchBox" action="https://forum.greysnet.com/search">
                        <input class='searchInput' type="text" class="text" placeholder="Search" id='searchInput' name="q" />
                    
                        <button id='searchButton' type="submit" name="submit_search" class="button-search" style='margin-left: -4pt;'>
                            <i class="fa fa-search"></i>
                        </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>

function addTopCategories() {
    var topCategories = document.getElementById('topCategories')
    // var mainOutlet = document.getElementById('ember4')
    var brandHeaders = document.getElementsByClassName('b-header')
    // var dHeader = document.getElementsByClassName('d-header')


    console.log("showing top categories")
    if (topCategories != null && brandHeaders != null) {

        if (brandHeaders.length > 0) {
            var brandHeader = brandHeaders[0]

            if (!topCategories.classList.contains('added') && brandHeaders != null) {
                // brandHeader.
                topCategories.parentElement.removeChild(topCategories);
                brandHeader.appendChild(topCategories);

                topCategories.classList.add('added')
                showTopCategories()
            }
        }
    }
}

function showTopCategories() {
    var topCategories = document.getElementById('topCategories')
    if (topCategories.classList.contains('added')) {
        if (window.location.href == 'https://forum.greysnet.com/' || window.location.href == 'https://forum.greysnet.com') {
            console.log("showing top categories")
            topCategories.style.display = 'block'
        } else {
            console.log("hiding top categories")
            topCategories.style.display = 'none'
        }
    }
}

var listenerAdded = false
function setUserIconListener() {
    // var userIcon = document.getElementById('current-user');


    var icons = document.getElementsByClassName('d-header-icons')

    if (icons != null) {
        var userIcon = icons[0]
        if (!listenerAdded) {
            console.log("added user listener")
            userIcon.addEventListener('click', function() {
                console.log("user icon clicked")
                selectUserName();
                listenerAdded = true;
            })
        }
    }
}

window.onload = function() {
    var tagline = document.getElementById('tagline')
    var parentItem = document.getElementsByClassName('b-header')
    console.log("adding tag line")

    if (parentItem.length > 0) {
        var wrapClass = parentItem[0].getElementsByClassName('title');
        if (wrapClass.length > 0) {
            var wrap = wrapClass[0]
            if (tagline != null) {
                if (wrap != null) {
                    tagline.parentElement.removeChild(tagline);
                    tagline.style.display = "block"
                    wrap.appendChild(tagline)
                }
            }
        }

    }

    addTopCategories()
    showTopCategories()
    setUserIconListener()

    setTimeout(function() {
        addTopCategories()
        showTopCategories()
    }, 200);

}

$( document ).ajaxComplete(function() {
    addTopCategories()
    showTopCategories()
}); 



function selectUserName() {

    setTimeout(function() {
        var links = document.getElementsByClassName('d-label');
        if (links != null) {
            var link = links[0]
            link.click();
        }
    }, 50);


}

</script>
