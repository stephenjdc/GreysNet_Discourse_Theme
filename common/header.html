<div id='tagline' class="tagline" style="
    text-align: left;
    font-weight: 300;
    font-size: 1.4em;
    color: #666666;
    display: none;
    margin-top: 20pt;
">The voice of older people online</div>


<div id='topCategories' style='display: none'>
    <div class='bigHeroImageDiv'>
        <div class='searchContainer wrap'>
            <div class="search-header">
                <form role="search" method="get" class="searchBox" action="https://forum.greysnet.com/search">
                        <input class='searchInput' type="text" class="text" placeholder="Search" id='searchInput' name="q" />
                    
                        <button id='searchButton' type="submit" name="submit_search" class="button-search" style='margin-left: -4pt;'>
                            <i class="fa fa-search"></i>
                        </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>

function addTopCategories() {
    var topCategories = document.getElementById('topCategories')
    // var mainOutlet = document.getElementById('ember4')
    var mainOutlet = document.getElementById('main')


    console.log("showing top categories")
    if (topCategories != null) {
        if (mainOutlet != null) {
            if (!topCategories.classList.contains('added')) {
                var mainBlock = mainOutlet.childNodes[1]
                if (mainBlock != null) {
                    mainBlock.insertBefore(topCategories, mainBlock.childNodes[2])
                    topCategories.parentElement.removeChild(topCategories);

                    // mainOutlet.insertBefore(topCategories, document.getElementById('main-outlet'))
                    topCategories.classList.add('added')
                }
            }
        }
    }
}

function showTopCategories() {
    var topCategories = document.getElementById('topCategories')
    if (window.location.href == 'https://forum.greysnet.com/' || window.location.href == 'https://forum.greysnet.com') {
        console.log("showing top categories")
        topCategories.style.display = 'block'
    } else {
        console.log("hiding top categories")
        topCategories.style.display = 'none'
    }
}

window.onload = function() {
    var tagline = document.getElementById('tagline')
    var parentItem = document.getElementsByClassName('b-header')
    console.log("adding tag line")

    if (parentItem.length > 0) {
        var wrapClass = parentItem[0].getElementsByClassName('title');
        if (wrapClass.length > 0) {
            var wrap = wrapClass[0]
            if (tagline != null) {
                if (wrap != null) {
                    tagline.parentElement.removeChild(tagline);
                    tagline.style.display = "block"
                    wrap.appendChild(tagline)
                }
            }
        }

    }

    // addTopCategories()
    // showTopCategories()
}

$( document ).ajaxComplete(function() {

    // addTopCategories()
    // showTopCategories()
}); 



<script type="text/discourse-plugin" version="0.8">
  const container = Discourse.__container__;
  const { h } = require('virtual-dom');
  const { iconNode } = require("discourse-common/lib/icon-library");

  api.createWidget('search-hero-widget', {
      tagName: 'span',
      html(attrs, state) {

        const path = window.location.pathname;
        const controller = container.lookup('controller:navigation/category');

        # if(/^\/c\//.test(path)) {

            html() {
                return "
                <div id='topCategories' style='display: none'>
                    <div class='bigHeroImageDiv'>
                        <div class='searchContainer wrap'>
                            <div class='search-header'>
                                <form role='search' method='get' class='searchBox' action='https://forum.greysnet.com/search'>
                                        <input class='searchInput' type='text' class='text' placeholder='Search' id='searchInput' name='q' />
                                    
                                        <button id='searchButton' type='submit' name='submit_search' class='button-search' style='margin-left: -4pt;'>
                                            <i class='fa fa-search></i>
                                        </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                ";
            # }
        );
    }
  }),

  api.decorateWidget('search-hero-widget:after', helper => {
      helper.widget.appEvents.on('page:changed', () => {
          helper.widget.scheduleRerender();
      });
  });
</script>

<script
  type="text/x-handlebars"
  data-template-name="/connectors/below-site-header/search-hero-widget"
>
  {{mount-widget widget="search-hero-widget"}}
</script>



</script>